# 2025-02-01

## 1.  React + Jotai lav
ReactとJotaiを使って実用的なNotion風ノートアプリを開発検証

2025年に入ってReact界隈に衝撃的が走りました。これまでメンテナンスが全然されていなかった状態管理ライブラリ『Recoil』のプロジェクトが凍結されました。

[RecoilのGitHub](https://github.com/facebookexperimental/Recoil)

2023年にMeta社のレイオフをきっかけにメンテナンスが半年以上されなくなっていたところに、React19が登場して対応できなくなった結果完全にRecoilはなくなったらしい。

ここはCursolの提案です。リサーチ必要
↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓
その後、React界隈ではZustandという状態管理ライブラリが注目されている。

[ZustandのGitHub](https://github.com/pmndrs/zustand)


そんな中、Recoilの代替として選ばれているのがJotaiです。

[JotaiのGitHub](https://github.com/pmndrs/jotai)

そんなJotaiを使ってNotion風ノートアプリを開発検証してみます。

- Reactの基本機能の理解
- Jotaiの状態管理の理解
- ConvexのDBを使ったデータの永続化
- コードブロック機能
- コード補完機能

この点にフォーカスして進めていきます。

そして、デプロイすれば日常でも活用できるレベルのものを目指します。

このリポジトリがベースになります。
[text](https://github.com/jinwatanabe/jotai-note-app)


## Jotaiって何？

JotaiはReactの状態管理ライブラリです。
そもそも状態管理ライブラリの役割から学びます。

アプリケーション全体のデータ（状態）を一元的に管理するためのツール。
Reactwo使っているとPropsのバケツリレーによる依存関係や影響範囲の複雑化が起きることがあります。

それを解決するために状態管理ライブラリが登場しました。

Jotaiはその中でも最もシンプルなものです。

Jotaiの公式ドキュメントはこちら
[Jotaiの公式ドキュメント](https://jotai.org/docs/introduction)

コンポーネントが多くなるとバケツリレーのように渡して最後の別のコンポーネントにデータを使って画面表示を行うことがあります。
コンポーネントA → コンポーネントB → コンポーネントC → コンポーネントD
これを、、、、
コンポーネントA → コンポーネントDに直接渡したいな、、、

それを実現できるのが状態管理ライブラリです。

構造的には、状態管理ライブ拉致を使うことによってグローバルステートを作り。
そこを利用して、どこからでもアクセス可能なデータ保管庫をつくることができます。
こうすることで必要なコンポーネントからデータを直接保管庫から読み取って使用することができる。

Reactの標準的な状態管理は、useContextという状態管理の仕組みが用意されている。
＊これは、コンポーネント間でデータを共有するための仕組みです。
useContextは、コンポーネント間でデータを共有するための仕組みです。

 Jotaiが注目されている３つの理由
 1. Recoilにインスパイアされているので使用感が近い
 2. useState感覚で利用できるのでキャッチアップしやすい
 3. 状態管理ライブラリ３部作の１つであり作者が日本人

 ## Jotaiの基本機能
 JotaiにおけるグローバルステートはAtomという単位で管理する

 ```
 function Counter() {
    //使いたいところでuseAtomを呼び出す
   const [count, setCount] = useAtom(countAtom);
   //count:現在の値
   //setCount:更新関数

   return (
    <div>
        <p>Count: {count}</p>
        <button onClick={() => setCount(count + 1)}>
            Increment
        </button>
    </div>
   )
 }
 ```
このようにストア（保管庫）を用意しておく。
そして、コンポーネントではuseAtomを呼び出してストアの値を取得して使用する。
こうすることでどこからでもこのストアをインポートして中身を取り出し利用することができる。
更新の方法はuseStateと変わらないので、同じ感覚で利用できます。